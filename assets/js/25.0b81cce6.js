(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{233:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"webpack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[t._v("#")]),t._v(" Webpack")]),t._v(" "),a("h3",{attrs:{id:"tabable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tabable"}},[t._v("#")]),t._v(" Tabable")]),t._v(" "),a("p",[t._v("####åŸºæœ¬ç”¨æ³•ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    SyncHook\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../lib/index"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SyncHook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("arg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'B'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    before"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½±å“è¯¥å›è°ƒçš„æ‰§è¡Œé¡ºåº, å›è°ƒBæ¯”å›è°ƒAå…ˆæ‰§è¡Œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("arg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'B:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// callçš„æ—¶å€™ä¼ çš„æ˜¯å‚æ•°argï¼Œä¸éœ€è¦keyã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Tapable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// output:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Tapable\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Tapable\n")])])]),a("p",[t._v("![image-20200604095421208](/Users/ouliang/Library/Application Support/typora-user-images/image-20200604095421208.png)")]),t._v(" "),a("p",[t._v("è¯´æ˜ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("Basic hook")]),t._v("ï¼šæŒ‰ç…§äº‹ä»¶æ³¨å†Œé¡ºåºï¼Œä¾æ¬¡æ‰§è¡Œ"),a("code",[t._v("handler")]),t._v("ï¼Œ"),a("code",[t._v("handler")]),t._v("ä¹‹é—´äº’ä¸å¹²æ‰°ï¼›")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Bail hook")]),t._v("ï¼šæŒ‰ç…§äº‹ä»¶æ³¨å†Œé¡ºåºï¼Œä¾æ¬¡æ‰§è¡Œ"),a("code",[t._v("handler")]),t._v("ï¼Œè‹¥å…¶ä¸­ä»»ä¸€"),a("code",[t._v("handler")]),t._v("è¿”å›å€¼ä¸ä¸º"),a("code",[t._v("undefined")]),t._v("ï¼Œåˆ™å‰©ä½™çš„"),a("code",[t._v("handler")]),t._v("å‡ä¸ä¼šæ‰§è¡Œï¼›")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Waterfall hook")]),t._v("ï¼šæŒ‰ç…§äº‹ä»¶æ³¨å†Œé¡ºåºï¼Œä¾æ¬¡æ‰§è¡Œ"),a("code",[t._v("handler")]),t._v("ï¼Œå‰ä¸€ä¸ª"),a("code",[t._v("handler")]),t._v("çš„è¿”å›å€¼å°†ä½œä¸ºä¸‹ä¸€ä¸ª"),a("code",[t._v("handler")]),t._v("çš„å…¥å‚ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("Loop hook"),a("code",[t._v("ï¼šæŒ‰ç…§äº‹ä»¶æ³¨å†Œé¡ºåºï¼Œä¾æ¬¡æ‰§è¡Œ")]),t._v("handler"),a("code",[t._v("ï¼Œè‹¥ä»»ä¸€")]),t._v("handler"),a("code",[t._v("çš„è¿”å›å€¼ä¸ä¸º")]),t._v("undefined"),a("code",[t._v("ï¼Œåˆ™è¯¥äº‹ä»¶é“¾å†æ¬¡**ä»å¤´**å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°æ‰€æœ‰")]),t._v("handler"),a("code",[t._v("å‡è¿”å›")]),t._v("undefined")])])]),t._v(" "),a("p",[t._v("####åŸºæœ¬åŸç†")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SyncHook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”Ÿæˆä¸‹é¢çš„å¯¹è±¡")]),t._v("\nTapable "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  taps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("tap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†cbæ”¾å…¥åˆ°Tabableå¯¹è±¡çš„tapsæ•°ç»„ä¸­ï¼Œå¹¶æ¸…ç©ºä¹‹å‰ç”Ÿæˆcallçš„æ–¹æ³•,taps = [cbA, cbB]")]),t._v("\nsh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cbA")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'B'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cbB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"B"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨callï¼Œé€šè¿‡å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼ˆæƒ°æ€§å‡½æ•°çš„æŠ€å·§ï¼‰ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Tapable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”Ÿæˆå‡½æ•°å¦‚ä¸‹, sh.call('Tapable') ç›¸å½“äºanonymous('Tapable')")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("anonymous")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _fn0 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_fn0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _fn1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_fn1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"æ’ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ’ä»¶"}},[t._v("#")]),t._v(" æ’ä»¶")]),t._v(" "),a("p",[t._v("EntryPluginæ’ä»¶å¦‚ä¸‹")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EntryPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * An entry plugin which will handle\n\t * creation of the EntryDependency\n\t *\n\t * @param {string} context context path\n\t * @param {string} entry entry path\n\t * @param {string} name entry key name\n\t */")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("entry "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tcompiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EntryPlugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" normalModuleFactory "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tcompilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencyFactories"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t\t\tEntryDependency"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// compiler.hooks.makeå°±æ˜¯ä¸€ä¸ªTabableå¯¹è±¡ï¼Œè¿™é‡Œè®¢é˜…ä¸€ä¸ªäº‹ä»¶ï¼Œ"EntryPlugin"å€¼å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨')]),t._v("\n\t\tcompiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tapAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EntryPlugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dep "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" EntryPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createDependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tcompilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEntry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * @param {string} entry entry request\n\t * @param {string} name entry name\n\t * @returns {EntryDependency} the dependency\n\t */")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createDependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dep "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EntryDependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("a",{attrs:{href:"https://juejin.im/post/5dcba29f6fb9a04abb01fd77#heading-1",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç¼–å†™è‡ªå®šä¹‰webpackæ’ä»¶ä»ç†è§£Tapableå¼€å§‹"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"webpackåŸºæœ¬åŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpackåŸºæœ¬åŸç†"}},[t._v("#")]),t._v(" WebpackåŸºæœ¬åŸç†")]),t._v(" "),a("p",[a("strong",[t._v("Compiler")]),t._v("  vs  "),a("strong",[t._v("Compilation")])]),t._v(" "),a("p",[t._v("compilerä»£è¡¨çš„æ˜¯ä¸å˜çš„webpackç¯å¢ƒï¼Œ æ˜¯ä¸€æ¬¡webpackå¯åŠ¨åˆ°ç»“æŸè¿‡ç¨‹ä¸­ä¸å˜çš„ä¸œè¥¿ã€‚è­¬å¦‚ï¼š åˆå§‹åŒ–webpacké…ç½®ï¼Œplguinæ’ä»¶ã€‚")]),t._v(" "),a("p",[t._v("compilationä»£è¡¨çš„æ˜¯ä¸€æ¬¡ç¼–è¯‘ä½œä¸šï¼Œæ¯ä¸€æ¬¡çš„ç¼–è¯‘éƒ½å¯èƒ½ä¸åŒ")]),t._v(" "),a("p",[a("strong",[t._v("æ¦‚è¿°ï¼š")])]),t._v(" "),a("ol",[a("li",[t._v("è°ƒç”¨"),a("code",[t._v("webpack")]),t._v("å‡½æ•°æ¥æ”¶"),a("code",[t._v("config")]),t._v("é…ç½®ä¿¡æ¯ï¼Œå¹¶åˆå§‹åŒ–"),a("code",[t._v("compiler")]),t._v("ï¼Œåœ¨æ­¤æœŸé—´ä¼š"),a("code",[t._v("apply")]),t._v("æ‰€æœ‰ webpack å†…ç½®çš„æ’ä»¶å’Œç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶;")]),t._v(" "),a("li",[t._v("è°ƒç”¨"),a("code",[t._v("compiler.run")]),t._v("è¿›å…¥æ¨¡å—ç¼–è¯‘é˜¶æ®µï¼›")]),t._v(" "),a("li",[t._v("æ¯ä¸€æ¬¡æ–°çš„ç¼–è¯‘éƒ½ä¼šå®ä¾‹åŒ–ä¸€ä¸ª"),a("code",[t._v("compilation")]),t._v("å¯¹è±¡ï¼Œè®°å½•æœ¬æ¬¡ç¼–è¯‘çš„åŸºæœ¬ä¿¡æ¯ï¼›")]),t._v(" "),a("li",[t._v("è¿›å…¥"),a("code",[t._v("make")]),t._v("é˜¶æ®µï¼Œå³è§¦å‘"),a("code",[t._v("compilation.hooks.make")]),t._v("é’©å­ï¼Œä»"),a("code",[t._v("entry")]),t._v("ä¸ºå…¥å£ï¼š a. è°ƒç”¨åˆé€‚çš„"),a("code",[t._v("loader")]),t._v("å¯¹æ¨¡å—æºç é¢„å¤„ç†ï¼Œè½¬æ¢ä¸ºæ ‡å‡†çš„JSæ¨¡å—ï¼› b. è°ƒç”¨ç¬¬ä¸‰æ–¹æ’ä»¶"),a("code",[t._v("acorn")]),t._v("å¯¹æ ‡å‡†JSæ¨¡å—è¿›è¡Œåˆ†æï¼Œæ”¶é›†æ¨¡å—ä¾èµ–é¡¹ã€‚åŒæ—¶ä¹Ÿä¼šç»§ç»­é€’å½’æ¯ä¸ªä¾èµ–é¡¹ï¼Œæ”¶é›†ä¾èµ–é¡¹çš„ä¾èµ–é¡¹ä¿¡æ¯ï¼Œä¸æ–­é€’å½’ä¸‹å»ï¼›æœ€ç»ˆä¼šå¾—åˆ°ä¸€é¢—ä¾èµ–æ ‘ğŸŒ²ï¼›")]),t._v(" "),a("li",[t._v("æœ€åè°ƒç”¨"),a("code",[t._v("compilation.seal")]),t._v(" render æ¨¡å—ï¼Œæ•´åˆå„ä¸ªä¾èµ–é¡¹ï¼Œæœ€åè¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªchunkï¼›")])]),t._v(" "),a("p",[a("strong",[t._v("è¯¦ç»†ï¼š")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("ç”±Compilerç±»å®ä¾‹åŒ–compilerï¼Œ æŒ‚è½½æ’ä»¶åˆ°compilerä¸Šï¼Œç­‰å¾…ç¼–è¯‘æ—¶è§¦å‘ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("createCompiler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// newæ—¶ï¼Œåœ¨compiler.hooksä¸ŠæŒ‚è½½äº†å¾ˆå¤šEventEmitå®ä¾‹ï¼Œè­¬å¦‚compiler.hooks.compilationå°±æ˜¯ä¸€ä¸ª")]),t._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// äº‹ä»¶å®ä¾‹ï¼Œ .tapæ—¶è®¢é˜…äº‹ä»¶ï¼Œ .callæ—¶è§¦å‘äº‹ä»¶ã€‚")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compiler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Compiler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨å†Œç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶, æ‰§è¡Œæ’ä»¶çš„applyæ–¹æ³•ï¼š")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// compiler.hooks.compilation.tap("ModuleInfoHeaderPlugin", () => {})')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æå‰æ³¨å†Œäº‹ä»¶ç›‘å¬ï¼Œç­‰å¾…ç¼–è¯‘æ—¶è§¦å‘äº‹ä»¶ã€‚")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugin "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" plugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterEnvironment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// processä¸­æ³¨å†Œæ‰€æœ‰webpackå†…ç½®çš„æ’ä»¶ï¼Œå¹¶åˆå§‹åŒ–ä¸€äº›options")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// processå‡½æ•°æ‰§è¡Œå®Œï¼Œwebpackå°†æ‰€æœ‰å®ƒå…³å¿ƒçš„hookæ¶ˆæ¯éƒ½æ³¨å†Œå®Œæˆï¼Œç­‰å¾…åç»­ç¼–è¯‘è¿‡ç¨‹ä¸­æŒ¨ä¸ªè§¦å‘ã€‚")]),t._v("\n    compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebpackOptionsApply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" compiler\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("compiler.run()")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Compiler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰€æœ‰é’©å­éƒ½æ˜¯ç”±`Tapable`æä¾›çš„ï¼Œä¸åŒé’©å­ç±»å‹åœ¨è§¦å‘æ—¶ï¼Œè°ƒç”¨æ—¶åºä¹Ÿä¸åŒ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            beforeRun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AsyncSeriesHook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compiler"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AsyncSeriesHook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compiler"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AsyncSeriesHook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stats"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onCompiled")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" compilation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterDone")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// beforeRun --\x3e run --\x3e done --\x3e afterDone")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// runå‡½æ•°é’©ä½äº†webpackç¼–è¯‘çš„å‰æœŸå’ŒåæœŸçš„é˜¶æ®µï¼Œ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‚£ä¹ˆä¸­æœŸæœ€ä¸ºå…³é”®çš„ä»£ç ç¼–è¯‘è¿‡ç¨‹å°±äº¤ç»™äº†this.compile()æ¥å®Œæˆäº†")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("beforeRun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("onCompiled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// onCompiled = callback")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("compiler.compile()")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" params "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newCompilationParams")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–æ¨¡å—å·¥å‚å¯¹è±¡")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// beforeCompile --\x3e compile --\x3e make --\x3e afterCompile")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("beforeCompile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// compilationè®°å½•æœ¬æ¬¡ç¼–è¯‘ä½œä¸šçš„ç¯å¢ƒä¿¡æ¯ ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compilation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Compilation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// makeå°±æ˜¯æˆ‘ä»¬å…³å¿ƒçš„ç¼–è¯‘è¿‡ç¨‹")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("finish")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("seal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("afterCompile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[t._v("ç¼–è¯‘çš„è¿‡ç¨‹ï¼šåŠ è½½å…¥å£æ–‡ä»¶ï¼Œè°ƒç”¨loaderå°†å…¥å£æ–‡ä»¶çš„æ‰€æœ‰ä¾èµ–è½¬æ¢æˆjsæ¨¡å—ï¼Œç„¶åè½¬æ¢æˆASTæ ‘ï¼Œæ‰¾å‡ºæ‰€æœ‰ä¾èµ–ï¼Œ å†å°†ASTè½¬æ¢æˆcodeã€‚è¿™ä¸ªè¿‡ç¨‹å°±å®Œæˆä¸€ä¸ªå…¥å£æ–‡ä»¶çš„å®Œæ•´ç¼–è¯‘è¿‡ç¨‹ï¼šç”¨loaderè½¬æ¢æˆjsæ¨¡å—ï¼Œæ‰¾åˆ°æ‰€æœ‰ä¾èµ–ï¼Œç”Ÿæˆcodeã€‚  ç„¶åå°±æ˜¯é€’å½’ä¾èµ–é¡¹ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç”Ÿæˆä¾èµ–å…³ç³»å›¾ã€‚æœ€åé‡å†™requireå‡½æ•°ç”Ÿæˆbundleã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¾èµ–å›¾")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    dependecies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./hello.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/hello.js'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"use strict";\\n\\nvar _hello = require("./hello.js");\\n\\ndocument.write((0, _hello.say)("webpack"));\'')]),t._v("  \t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/hello.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    dependecies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"use strict";\\n\\nObject.defineProperty(exports, "__esModule", {\\n  value: true\\n});\\nexports.say = say;\\n\\nfunction say(name) {\\n  return "hello ".concat(name);\\n}\'')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"ä¸€äº›æ¦‚å¿µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€äº›æ¦‚å¿µ"}},[t._v("#")]),t._v(" ä¸€äº›æ¦‚å¿µ")]),t._v(" "),a("h4",{attrs:{id:"hash-vs-chunkhash-vs-contenthash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hash-vs-chunkhash-vs-contenthash"}},[t._v("#")]),t._v(" hash vs chunkHash vs contentHash")]),t._v(" "),a("p",[a("strong",[t._v("Hash:")]),t._v(" æ¯æ¬¡æ„å»ºç”Ÿæˆæ‰€æœ‰çš„æ–‡ä»¶åç¼€hashå€¼éƒ½ä¸€æ ·ã€‚ä»»ä¸€æ–‡ä»¶å†…å®¹æ”¹å˜ï¼Œæ‰€æœ‰æ–‡ä»¶çš„hashå€¼éƒ½æ”¹å˜ï¼›æ²¡æ”¹åŠ¨åˆ™æ¯æ¬¡æ„å»ºhashå€¼ä¸å˜ã€‚ä¸€èˆ¬ä¸ç”¨ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("chunkHashï¼š")]),t._v(" æ ¹æ®å…¥å£çš„ä¸åŒç”Ÿæˆä¸åŒçš„hashçš„chunkã€‚å¯ç”¨äºå°†åŸºç¡€åŒ…å’Œä¸šåŠ¡ä»£ç åˆ†åˆ«å¢åŠ å…¥å£ï¼Œç„¶åæ‰“æˆä¸åŒchunkçš„åŒ…ï¼Œå½“ä¸šåŠ¡ä»£ç å˜åŠ¨æ—¶ï¼Œä¸ä¼šå½±å“åˆ°åŸºç¡€åŒ…çš„hashå€¼ã€‚")]),t._v(" "),a("p",[t._v("ä½†ç¼ºç‚¹æ˜¯jsæ–‡ä»¶å¼•ç”¨cssæ—¶ï¼Œå³ä½¿åˆ†ç¦»å‡ºcssæ–‡ä»¶ï¼Œä»–ä»¬ä¹Ÿæ˜¯å…¬ç”¨ä¸€ä¸ªhashã€‚æ‰€ä»¥å¦‚æœjsæ–‡ä»¶æ”¹åŠ¨è€Œcssæ–‡ä»¶æœªæ”¹åŠ¨çš„è¯ï¼Œcssçš„hashå€¼ä¾ç„¶ä¼šå˜ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("contentHashï¼š")]),t._v(" ä¸€èˆ¬cssæ–‡ä»¶ä½¿ç”¨contentHashï¼Œè¿™æ ·jsæ–‡ä»¶æ”¹åŠ¨æ—¶ï¼Œcssæ–‡ä»¶æœªæ”¹åŠ¨ï¼Œåˆ™cssæ–‡ä»¶çš„hashä¸ä¼šæ›´æ”¹ã€‚ä½†æ˜¯è‹¥cssæ–‡ä»¶æ”¹åŠ¨ï¼Œè€Œjsæ–‡ä»¶æœªæ”¹åŠ¨æ—¶ï¼Œä¸¤è€…çš„hashå‡ä¼šæ”¹åŠ¨ã€‚è§£å†³åŠæ³•åº”è¯¥æ˜¯æŠ½å‡ºruntimeï¼Ÿï¼ˆå­˜ç–‘ï¼‰")]),t._v(" "),a("p",[a("strong",[t._v("dll")])]),t._v(" "),a("p",[t._v("ç›¸å½“äºæ‰“åŒ…çš„ç¼“å­˜ï¼Œwebpack4å·²ç»ä¸éœ€è¦ä½¿ç”¨äº†ï¼Œæå‡é€Ÿåº¦å¾ˆå°‘ï¼Œå¯ä½¿ç”¨"),a("a",{attrs:{href:"https://github.com/mzgoddard/hard-source-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("HardSourceWebpackPlugin"),a("OutboundLink")],1),t._v("ï¼Œ webpack5ä¹Ÿå†…ç½®äº†HardSourceWebpackPluginã€‚")]),t._v(" "),a("p",[a("strong",[t._v("webpack ä¸­ï¼Œmoduleï¼Œchunk å’Œ bundle çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("æˆ‘ä»¬ç›´æ¥å†™å‡ºæ¥çš„æ˜¯ moduleï¼Œwebpack å¤„ç†æ—¶æ˜¯ chunkï¼Œæœ€åç”Ÿæˆæµè§ˆå™¨å¯ä»¥ç›´æ¥è¿è¡Œçš„ bundleã€‚")]),t._v(" "),a("p",[a("strong",[t._v("filename å’Œ chunkFilename çš„åŒºåˆ«")])]),t._v(" "),a("p",[a("code",[t._v("filename")]),t._v(" æŒ‡"),a("strong",[t._v("åˆ—åœ¨")]),t._v(" "),a("code",[t._v("entry")]),t._v(" ä¸­ï¼Œæ‰“åŒ…åè¾“å‡ºçš„æ–‡ä»¶çš„åç§°ã€‚")]),t._v(" "),a("p",[a("code",[t._v("chunkFilename")]),t._v(" æŒ‡"),a("strong",[t._v("æœªåˆ—åœ¨")]),t._v(" "),a("code",[t._v("entry")]),t._v(" ä¸­ï¼Œå´åˆéœ€è¦è¢«æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶çš„åç§°ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("webpackPrefetchã€webpackPreload å’Œ webpackChunkName åˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ")])]),t._v(" "),a("p",[a("code",[t._v("webpackChunkName")]),t._v(" æ˜¯ä¸ºé¢„åŠ è½½çš„æ–‡ä»¶å–åˆ«åï¼Œ"),a("code",[t._v("webpackPrefetch")]),t._v(" ä¼šåœ¨æµè§ˆå™¨é—²ç½®ä¸‹è½½æ–‡ä»¶ï¼Œ"),a("code",[t._v("webpackPreload")]),t._v(" ä¼šåœ¨çˆ¶ chunk åŠ è½½æ—¶å¹¶è¡Œä¸‹è½½æ–‡ä»¶ã€‚")]),t._v(" "),a("p",[t._v("ä¼˜åŒ–Webpack")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ä½¿ç”¨"),a("code",[t._v("é«˜ç‰ˆæœ¬")]),t._v("çš„ Webpack å’Œ Node.js")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("å¤šè¿›ç¨‹/å¤šå®ä¾‹æ„å»º")]),t._v("ï¼šHappyPack(ä¸ç»´æŠ¤äº†)ã€thread-loade")])]),t._v(" "),a("li",[a("p",[t._v("å‹ç¼©ä»£ç ")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("ç¼©å°æ‰“åŒ…ä½œç”¨åŸŸ")])])]),t._v(" "),a("li",[a("p",[t._v("æå–é¡µé¢å…¬å…±èµ„æº")])]),t._v(" "),a("li",[a("p",[t._v("å……åˆ†åˆ©ç”¨ç¼“å­˜æå‡äºŒæ¬¡æ„å»ºé€Ÿåº¦")])]),t._v(" "),a("li",[a("p",[t._v("tree shaking")])])]),t._v(" "),a("p",[t._v("sideEffects**")]),t._v(" "),a("p",[t._v("sideEffectsæ˜¯æ•´ä¸ªåŒ…çš„è§’åº¦æ¥çœ‹çš„ï¼Œå¦‚æœè¿™ä¸ªåŒ…ä¸æ˜¯åšpolyfillçš„ï¼Œå°±å¯ä»¥åŠ ä¸Š "),a("code",[t._v("sideEffects: false")]),t._v(" ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("é¡¹ç›®ä¸­ä½¿ç”¨åˆ°lessæˆ–è€…sassçš„è¯ä¸èƒ½ç›´æ¥sideEffects: falseå§ï¼Œå¥½åƒä¼šè¢«tree shakingï¼Œå¯¼è‡´mini-css-extract-pluginæ— æ³•æŠ½å–å‡ºcssæ–‡ä»¶")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…¨å±€ CSS å‰¯ä½œç”¨è§„åˆ™ç›¸å…³çš„ Webpack é…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  rules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/regex/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("loaders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    sideEffects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("æˆ‘è¿™ä¸ªåŒ…åœ¨è®¾è®¡çš„æ—¶å€™å°±æ˜¯æœŸæœ›æ²¡æœ‰å‰¯ä½œç”¨çš„ï¼Œå³ä½¿ä»–æ‰“å®ŒåŒ…åæ˜¯æœ‰å‰¯ä½œç”¨çš„ï¼Œwebpack åŒå­¦ä½ æ‘‡æ ‘æ—¶æ”¾å¿ƒçš„å½“æˆæ— å‰¯ä½œç”¨åŒ…æ‘‡å°±å¥½å•¦ï¼")])]),t._v(" "),a("p",[a("strong",[t._v("Treeshaking")])]),t._v(" "),a("p",[t._v("åŸºç¡€ï¼šå› ä¸ºES6æ¨¡å—çš„å‡ºç°ï¼ŒES6æ¨¡å—ä¾èµ–å…³ç³»æ˜¯ç¡®å®šçš„ï¼Œ"),a("code",[t._v("å’Œè¿è¡Œæ—¶çš„çŠ¶æ€æ— å…³")]),t._v("ï¼Œå¯ä»¥è¿›è¡Œå¯é çš„é™æ€åˆ†æï¼Œ")]),t._v(" "),a("p",[t._v("ä¸èƒ½treeshakingçš„æƒ…å†µï¼š")]),t._v(" "),a("ul",[a("li",[t._v('å¯¹äºäº§ç”Ÿå‰¯ä½œç”¨çš„ä»£ç æ— æ³•æ¶ˆé™¤ï¼šegï¼šç±»ã€‚ç«‹å³æ‰§è¡Œå‡½æ•°ã€‚babelä¼šæŠŠç±»è½¬æ¢æˆç«‹å³æ‰§è¡Œå‡½æ•°ã€‚æ²¡æœ‰å‰¯ä½œç”¨"è¿™ä¸ªçŸ­è¯­å¯ä»¥è¢«è§£é‡Šä¸º"ä¸ä¸é¡¶å±‚æ¨¡å—ä»¥å¤–çš„ä¸œè¥¿è¿›è¡Œäº¤äº’')])]),t._v(" "),a("p",[t._v("ä¼˜åŒ–æ–¹æ³•ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç¬¬ä¸‰æ–¹åº“ï¼šå°½é‡ä½¿ç”¨æä¾›ESæ¨¡å—çš„ç‰ˆæœ¬")]),t._v(" "),a("li",[t._v("babelè®¾ç½®moduleï¼š falseï¼Œä½¿ç”¨webpackçš„æ¨¡å—è§£æã€‚")]),t._v(" "),a("li",[t._v("æ·»åŠ æ³¨é‡Š"),a("code",[t._v("/*#__PURE__*/")]),t._v("çš„æ–¹å¼æ¥å£°æ˜ä¸€ä¸ªæ— å‰¯ä½œç”¨çš„å‡½æ•°ï¼ˆbabelå’Œwebpackå‡å¯è¿‡æ»¤ï¼‰")]),t._v(" "),a("li",[t._v("ä½¿ç”¨æ’ä»¶"),a("a",{attrs:{href:"https://github.com/vincentdchan/webpack-deep-scope-analysis-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-deep-scope-analysis-plugin"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("sideEffects?")]),t._v(" "),a("p",[t._v("å¯¹äºäº§ç”Ÿå‰¯ä½œç”¨çš„ä»£ç æ— æ³•æ¶ˆé™¤ï¼šegï¼šç±»ã€‚ç«‹å³æ‰§è¡Œå‡½æ•°")]),t._v(" "),a("p",[t._v("ä½¿ç”¨æ’ä»¶"),a("a",{attrs:{href:"https://github.com/vincentdchan/webpack-deep-scope-analysis-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-deep-scope-analysis-plugin"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("ä½¿ç”¨ES2015(ES6)çš„æ¨¡å—")]),t._v(" "),a("li",[t._v("é¿å…ä½¿ç”¨IIFE")]),t._v(" "),a("li",[t._v("å¦‚æœä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ¨¡å—ï¼Œå¯ä»¥å°è¯•ç›´æ¥ä»æ–‡ä»¶è·¯å¾„å¼•ç”¨çš„æ–¹å¼ä½¿ç”¨")])]),t._v(" "),a("p",[t._v("Uglifyä¸åšç¨‹åºæµçš„åˆ†æï¼Œä½†æ˜¯rollupåšäº†")]),t._v(" "),a("p",[t._v("å˜é‡çš„èµ‹å€¼å¯èƒ½ä¼šå¼•èµ·å‰¯ä½œç”¨")]),t._v(" "),a("p",[t._v("å¯ä»¥å°è¯•æ·»åŠ æ³¨é‡Š"),a("code",[t._v("/*#__PURE__*/")]),t._v("çš„æ–¹å¼æ¥å£°æ˜ä¸€ä¸ªæ— å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œä½¿å¾—Webpackåœ¨åˆ†æå¤„ç†æ—¶å¯ä»¥è¿‡æ»¤æ‰è¿™éƒ¨åˆ†ä»£ç ï¼Œè¿™ä¹Ÿæ˜¯Babel"),a("code",[t._v("7")]),t._v("çš„æ‰§è¡Œè¡Œä¸º")])])}),[],!1,null,null,null);s.default=e.exports}}]);