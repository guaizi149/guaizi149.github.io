<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>git常用操作 | 自留地</title>
    <meta name="description" content="构建自己的前端知识体系，学学其他感兴趣的东西">
    
    
    <link rel="preload" href="/assets/css/0.styles.25475262.css" as="style"><link rel="preload" href="/assets/js/app.c4ee8238.js" as="script"><link rel="preload" href="/assets/js/2.d33ca5e5.js" as="script"><link rel="preload" href="/assets/js/31.ba3d42c9.js" as="script"><link rel="prefetch" href="/assets/js/10.64571db3.js"><link rel="prefetch" href="/assets/js/11.d20305c0.js"><link rel="prefetch" href="/assets/js/12.900d3086.js"><link rel="prefetch" href="/assets/js/13.13f44de6.js"><link rel="prefetch" href="/assets/js/14.ec775242.js"><link rel="prefetch" href="/assets/js/15.3fc2ac06.js"><link rel="prefetch" href="/assets/js/16.c6de990f.js"><link rel="prefetch" href="/assets/js/17.d35e877e.js"><link rel="prefetch" href="/assets/js/18.ad60cb0d.js"><link rel="prefetch" href="/assets/js/19.145d146e.js"><link rel="prefetch" href="/assets/js/20.cdd0c263.js"><link rel="prefetch" href="/assets/js/21.75814d08.js"><link rel="prefetch" href="/assets/js/22.5c4ad18f.js"><link rel="prefetch" href="/assets/js/23.936b0ea2.js"><link rel="prefetch" href="/assets/js/24.04ad7624.js"><link rel="prefetch" href="/assets/js/25.0b81cce6.js"><link rel="prefetch" href="/assets/js/26.74da315b.js"><link rel="prefetch" href="/assets/js/27.884f44d0.js"><link rel="prefetch" href="/assets/js/28.f28c0f63.js"><link rel="prefetch" href="/assets/js/29.8c79d59b.js"><link rel="prefetch" href="/assets/js/3.4cd9d029.js"><link rel="prefetch" href="/assets/js/30.f6d2a313.js"><link rel="prefetch" href="/assets/js/32.d8087f75.js"><link rel="prefetch" href="/assets/js/33.a91b1565.js"><link rel="prefetch" href="/assets/js/34.8d69ccdc.js"><link rel="prefetch" href="/assets/js/35.0215d3d4.js"><link rel="prefetch" href="/assets/js/36.9f469f71.js"><link rel="prefetch" href="/assets/js/4.abed38d4.js"><link rel="prefetch" href="/assets/js/5.cd784ab4.js"><link rel="prefetch" href="/assets/js/6.e5fe4998.js"><link rel="prefetch" href="/assets/js/7.cf376b6b.js"><link rel="prefetch" href="/assets/js/8.6c3e2080.js"><link rel="prefetch" href="/assets/js/9.e77df01f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.25475262.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">自留地</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/frontend/" class="nav-link">前端知识体系</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">计算机基础</a></div><div class="nav-item"><a href="/read/" class="nav-link">读书</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/frontend/" class="nav-link">前端知识体系</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">计算机基础</a></div><div class="nav-item"><a href="/read/" class="nav-link">读书</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>计算机基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">介绍</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/reference.html" class="sidebar-link">Git</a></li><li><a href="/guide/note.html" class="active sidebar-link">git常用操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/note.html#git常用操作" class="sidebar-link">git常用操作</a></li></ul></li><li><a href="/guide/source-code-explore.html" class="sidebar-link">Dva 源码解析</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="git常用操作"><a href="#git常用操作" class="header-anchor">#</a> git常用操作</h2> <h3 id="查看"><a href="#查看" class="header-anchor">#</a> 查看</h3> <p><code>git reflog</code>  查看引用日志</p> <p><code>git log</code></p> <p><code>git show 1c002d...</code> 查看1c002d的提交历史</p> <p><code>git show HEAD@{3}</code> 查看之前第三次的提交历史</p> <p><code>git show HEAD^</code> 查看上一次提交历史</p> <p><code>git show HEAD~3</code>  父提交的父提交的父提交</p> <p>![image-20190104104026054](/Users/ouliang/Library/Application Support/typora-user-images/image-20190104104026054.png)</p> <h4 id="提交区间"><a href="#提交区间" class="header-anchor">#</a> 提交区间</h4> <p><img src="https://git-scm.com/book/en/v2/images/double-dot.png" alt="Example history for range selection."></p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># 双点</span>
$ git log master<span class="token punctuation">.</span><span class="token punctuation">.</span>experiment <span class="token operator">/</span><span class="token operator">/</span>显示在experiment中而不再master中的提交
<span class="token constant">D</span>
<span class="token constant">C</span>

$ git log experiment<span class="token punctuation">.</span><span class="token punctuation">.</span>master <span class="token operator">/</span><span class="token operator">/</span>显示在master中而不再experiment中的提交
<span class="token constant">F</span>
<span class="token constant">E</span>

$ git log origin<span class="token operator">/</span>master<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token constant">HEAD</span> <span class="token operator">/</span><span class="token operator">/</span>输出在当前分支而不在远程origin中的提交，也就是git push所提交的内容
</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">/</span><span class="token operator">/</span> 在refB中但不再refA中的提交
$ git log refA<span class="token punctuation">.</span><span class="token punctuation">.</span>refB
$ git log <span class="token operator">^</span>refA refB
$ git log refB <span class="token operator">--</span><span class="token keyword">not</span> refA

<span class="token operator">/</span><span class="token operator">/</span> 在refA refB但不在refC中的提交
$ git log refA refB <span class="token operator">^</span>refC
$ git log refA refB <span class="token operator">--</span><span class="token keyword">not</span> refC
</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">/</span><span class="token operator">/</span> 两者不同的提交
$ git log <span class="token operator">--</span>left<span class="token operator">-</span>right master<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>experiment
<span class="token operator">&lt;</span> <span class="token constant">F</span>
<span class="token operator">&lt;</span> <span class="token constant">E</span>
<span class="token operator">&gt;</span> <span class="token constant">D</span>
<span class="token operator">&gt;</span> <span class="token constant">C</span>
</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code>git log <span class="token operator">--</span>author<span class="token operator">=</span>欧亮 <span class="token operator">--</span>pretty<span class="token operator">=</span>format<span class="token punctuation">:</span><span class="token string">&quot;%h - %an, %ar : %s&quot;</span>  <span class="token operator">--</span>since<span class="token operator">=</span><span class="token string">&quot;2019-01-23&quot;</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>意义</th></tr></thead> <tbody><tr><td><code>--abbrev-commit</code></td> <td>简短SHA-1值</td></tr> <tr><td><code>--pretty=oneline</code></td> <td>SHA-1值和msg一行显示</td></tr> <tr><td><code>--author=OULIANG227</code></td> <td>显示特定作者的提交</td></tr> <tr><td><code>-p -n</code></td> <td>显示近n次提交的内容差异，相当于git log + git show</td></tr> <tr><td><code>--stat</code></td> <td>显示简略的统计信息![image-20190104113700548](/Users/ouliang/Library/Application Support/typora-user-images/image-20190104113700548.png)</td></tr> <tr><td></td> <td></td></tr> <tr><td></td> <td></td></tr> <tr><td></td> <td></td></tr> <tr><td></td> <td></td></tr></tbody></table> <ul><li>引用日志只存在本地</li></ul> <h3 id="添加"><a href="#添加" class="header-anchor">#</a> 添加</h3> <p><code>git add -i</code> 交互式暂存。 相当于<code>git add -p</code>和<code>git add -patch</code>。</p> <p>###暂存</p> <p><code>git stash</code> 默认会把<code>git add</code>添加的文件也stash，未跟踪的文件不会储藏。 <code>git stash --keep-index</code>不储藏<code>git add</code>已暂存的东西。<code>git stash -u</code>储藏未跟踪的文件。</p> <p><code>git stash list</code></p> <p><code>git stash apply stash@{2}</code>  会把<code>git add</code>的文件变成add之前的状态，就是index区的文件拿回到workspace中。默认stash{0}</p> <p><code>git stash apply --index</code> <code>git add</code>的文件还存在index区域</p> <p><code>git stash drop stash@{3}</code> 移除。默认stash{0}</p> <p><code>git stash pop</code> 立即应用储藏并从栈上扔掉它</p> <p><code>git stash --patch</code> 交互式储藏</p> <h3 id="清理"><a href="#清理" class="header-anchor">#</a> 清理</h3> <p><code>git clean</code> 只会移除没有忽略的未跟踪文件</p> <p><code>git clean -n</code> 告诉你哪些文件会被删除，不会真正的删除</p> <p><code>git clean -f</code> 删除没有被track的文件</p> <p><code>git clean -df</code> 删除没有track的文件和文件夹</p> <h3 id="vm常用操作"><a href="#vm常用操作" class="header-anchor">#</a> Vm常用操作</h3> <p>vm有编辑模式和命令模式。i进入编辑模式后就像使用记事本一样，之后使用esc后可以使用以下的各种命令。</p> <table><thead><tr><th>命令</th> <th>操作</th></tr></thead> <tbody><tr><td>i</td> <td>进入编辑模式</td></tr> <tr><td>esc</td> <td>退出编辑模式，进入命令模式</td></tr> <tr><td>wq</td> <td>保存退出</td></tr> <tr><td>q!</td> <td>不保存退出</td></tr> <tr><td>q</td> <td>没有修改时，直接退出</td></tr> <tr><td>u</td> <td>撤销</td></tr> <tr><td>yy或者Y</td> <td>复制</td></tr> <tr><td>p</td> <td>粘贴</td></tr> <tr><td>dd</td> <td>删除当前行</td></tr></tbody></table> <h3 id="重写历史"><a href="#重写历史" class="header-anchor">#</a> 重写历史</h3> <p><code>git commmit --amend</code> 可以在提交后修改commit msg，或者先<code>git add</code>或者<code>git rm</code>之后，在运行--amend修改历史。不要在push后再使用此命令。</p> <h3 id="重置"><a href="#重置" class="header-anchor">#</a> 重置</h3> <p>![image-20190108180557908](/Users/ouliang/Library/Application Support/typora-user-images/image-20190108180557908.png)</p> <p>![image-20190108180933697](/Users/ouliang/Library/Application Support/typora-user-images/image-20190108180933697.png)</p> <p><code>git reset</code>之后，再次提交，需要使用<code>git push --force</code>强制提交覆盖之前的commit。这样提交后上图中的<code>38eb946</code>的commit就不存在了。</p> <p><code>--soft</code>相当于回到<code>git commit</code>前，之前的commit的变化的文件会已绿色显示，此时index区域是V3,HEAD区是V2，等待再次commmit。</p> <p>``--mixed<code>回到</code>git add`前，之前add的文件会已红色显示，此时index区域是V2，工作区是V3。</p> <p><code>--hard</code>则是更新所有。会覆盖工作区未提交的变动。</p> <p><code>reset</code> 命令会以特定的顺序重写这三棵树，在你指定以下选项时停止：</p> <ol><li>移动 HEAD 分支的指向 <em>（若指定了 --soft，则到此停止）</em></li> <li>使索引看起来像 HEAD <em>（若未指定 --hard，则到此停止）</em></li> <li>使工作目录看起来像索引</li></ol> <h4 id="通过路径来重置"><a href="#通过路径来重置" class="header-anchor">#</a> 通过路径来重置</h4> <p><code>git reset file.txt</code>，<code>reset</code> 命令也可以接受一个 <code>--patch</code> 选项</p> <ol><li>移动 HEAD 分支的指向 <em>（已跳过）</em></li> <li>让索引看起来像 HEAD <em>（到此处停止）</em></li></ol> <p>![image-20190108182445664](/Users/ouliang/Library/Application Support/typora-user-images/image-20190108182445664.png)</p> <p>如果我们现在运行 <code>git commit</code>，它就会记录一条“将该文件恢复到 <strong>v1</strong> 版本”的更改，尽管我们并未在工作目录中真正地再次拥有它。</p> <p>取消暂存： <code>git reset HEAD &lt;file&gt;</code>。 相当于<code>git add</code>相反。</p> <p>![image-20190108182824503](/Users/ouliang/Library/Application Support/typora-user-images/image-20190108182824503.png)</p> <p>此时相当于使用v1覆盖v2，也就是<code>file.txt</code> add前的状态。</p> <p>####压缩</p> <p><img src="https://git-scm.com/book/en/v2/images/reset-squash-r2.png" alt="reset squash r2"></p> <p>再次<code>git commit</code>， 这样提交历史中将不存在V2版本。</p> <h3 id="检出"><a href="#检出" class="header-anchor">#</a> 检出</h3> <p><img src="https://git-scm.com/book/en/v2/images/reset-checkout.png" alt="reset checkout"></p> <ol><li><p>将branch1，branch2都合并到master后，可以切换到branch2直接<code>git reset master</code>，这时master和branch2都指向了统一commit，不需要再重新基于master拉取分支了。(此时本地可能会比远程超前很多个版本，这是因为本地已经和master的提交一致，此时只要git push即可)</p></li> <li><p>重命名远程分支：a、先将本地分支重命名</p> <p>git branch -m oldBranch newBranch</p> <p>b、删除远程分支（远端无此分支则跳过该步骤）</p> <p>git push --delete origin oldBranch</p> <p>c、将重命名后的分支推到远端</p> <p>git push origin newBranch</p> <p>d、把修改后的本地分支与远程分支关联</p> <p>git branch --set-upstream-to origin/newBranch</p></li> <li><p>删除远程无用分支</p> <p>git remote prune origin</p></li> <li><p>如何将最新的几个连续commit合并成一个commit</p> <p>先使用git reset commit号，将准备合并的commit重新add后git push —force</p></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/29/2019, 11:22:53 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/reference.html" class="prev">Git</a></span> <span class="next"><a href="/guide/source-code-explore.html">Dva 源码解析</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c4ee8238.js" defer></script><script src="/assets/js/2.d33ca5e5.js" defer></script><script src="/assets/js/31.ba3d42c9.js" defer></script>
  </body>
</html>
